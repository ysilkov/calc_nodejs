{"ast":null,"code":"'use strict';\n\nconst ACTIONS_TO_KEEP = 50;\nconst status = {\n  canUndo: false,\n  canRedo: false\n};\nconst actionTracker = {\n  list: [],\n  _pointer: -1,\n\n  get index() {\n    return this._pointer;\n  },\n\n  set index(val) {\n    this._pointer = val;\n    status.canUndo = this.index >= 0;\n    status.canRedo = this.index < this.list.length - 1;\n  },\n\n  add(action) {\n    this.list.splice(this.index + 1);\n    this.list.push(action);\n    this.index++;\n\n    if (this.index >= ACTIONS_TO_KEEP) {\n      this.list.shift();\n      this.index--;\n    }\n\n    return action.execute(action.value);\n  },\n\n  undo() {\n    const action = this.list[this.index];\n    this.index--;\n    return action.undo(action.value);\n  },\n\n  redo() {\n    const action = this.list[this.index + 1];\n    this.index++;\n    return action.execute(action.value);\n  }\n\n};\nconst undoRedoManager = {\n  status,\n\n  get canUndo() {\n    return status.canUndo;\n  },\n\n  get canRedo() {\n    return status.canRedo;\n  },\n\n  execute: (execute, undo, value) => {\n    return actionTracker.add({\n      execute,\n      undo,\n      value\n    });\n  },\n  undo: () => {\n    if (status.canUndo) return actionTracker.undo();\n  },\n  redo: () => {\n    if (status.canRedo) return actionTracker.redo();\n  }\n};\nmodule.exports = undoRedoManager;\nmodule.exports.default = undoRedoManager;","map":{"version":3,"names":["ACTIONS_TO_KEEP","status","canUndo","canRedo","actionTracker","list","_pointer","index","val","length","add","action","splice","push","shift","execute","value","undo","redo","undoRedoManager","module","exports","default"],"sources":["D:/calc_nodejs/client/node_modules/js-undo-redo/index.js"],"sourcesContent":["'use strict'\n\nconst ACTIONS_TO_KEEP = 50\nconst status = {\n  canUndo: false,\n  canRedo: false\n}\n\nconst actionTracker = {\n  list: [],\n  _pointer: -1,\n  get index() { return this._pointer },\n  set index(val) {\n    this._pointer = val\n    status.canUndo = this.index >= 0\n    status.canRedo = this.index < this.list.length - 1\n  },\n  add(action) {\n    this.list.splice(this.index + 1)\n    this.list.push(action)\n    this.index++\n    if (this.index >= ACTIONS_TO_KEEP) {\n      this.list.shift()\n      this.index--\n    }\n    return action.execute(action.value)\n  },\n  undo() {\n    const action = this.list[this.index]\n    this.index--\n    return action.undo(action.value)\n  },\n  redo() {\n    const action = this.list[this.index + 1]\n    this.index++\n    return action.execute(action.value)\n  }\n}\n\nconst undoRedoManager = {\n  status,\n  get canUndo() { return status.canUndo },\n  get canRedo() { return status.canRedo },\n  execute: (execute, undo, value) => {\n    return actionTracker.add({ execute, undo, value })\n  },\n  undo: () => {\n    if (status.canUndo) return actionTracker.undo()\n  },\n  redo: () => {\n    if (status.canRedo) return actionTracker.redo()\n  }\n}\n\n\nmodule.exports = undoRedoManager\nmodule.exports.default = undoRedoManager"],"mappings":"AAAA;;AAEA,MAAMA,eAAe,GAAG,EAAxB;AACA,MAAMC,MAAM,GAAG;EACbC,OAAO,EAAE,KADI;EAEbC,OAAO,EAAE;AAFI,CAAf;AAKA,MAAMC,aAAa,GAAG;EACpBC,IAAI,EAAE,EADc;EAEpBC,QAAQ,EAAE,CAAC,CAFS;;EAGpB,IAAIC,KAAJ,GAAY;IAAE,OAAO,KAAKD,QAAZ;EAAsB,CAHhB;;EAIpB,IAAIC,KAAJ,CAAUC,GAAV,EAAe;IACb,KAAKF,QAAL,GAAgBE,GAAhB;IACAP,MAAM,CAACC,OAAP,GAAiB,KAAKK,KAAL,IAAc,CAA/B;IACAN,MAAM,CAACE,OAAP,GAAiB,KAAKI,KAAL,GAAa,KAAKF,IAAL,CAAUI,MAAV,GAAmB,CAAjD;EACD,CARmB;;EASpBC,GAAG,CAACC,MAAD,EAAS;IACV,KAAKN,IAAL,CAAUO,MAAV,CAAiB,KAAKL,KAAL,GAAa,CAA9B;IACA,KAAKF,IAAL,CAAUQ,IAAV,CAAeF,MAAf;IACA,KAAKJ,KAAL;;IACA,IAAI,KAAKA,KAAL,IAAcP,eAAlB,EAAmC;MACjC,KAAKK,IAAL,CAAUS,KAAV;MACA,KAAKP,KAAL;IACD;;IACD,OAAOI,MAAM,CAACI,OAAP,CAAeJ,MAAM,CAACK,KAAtB,CAAP;EACD,CAlBmB;;EAmBpBC,IAAI,GAAG;IACL,MAAMN,MAAM,GAAG,KAAKN,IAAL,CAAU,KAAKE,KAAf,CAAf;IACA,KAAKA,KAAL;IACA,OAAOI,MAAM,CAACM,IAAP,CAAYN,MAAM,CAACK,KAAnB,CAAP;EACD,CAvBmB;;EAwBpBE,IAAI,GAAG;IACL,MAAMP,MAAM,GAAG,KAAKN,IAAL,CAAU,KAAKE,KAAL,GAAa,CAAvB,CAAf;IACA,KAAKA,KAAL;IACA,OAAOI,MAAM,CAACI,OAAP,CAAeJ,MAAM,CAACK,KAAtB,CAAP;EACD;;AA5BmB,CAAtB;AA+BA,MAAMG,eAAe,GAAG;EACtBlB,MADsB;;EAEtB,IAAIC,OAAJ,GAAc;IAAE,OAAOD,MAAM,CAACC,OAAd;EAAuB,CAFjB;;EAGtB,IAAIC,OAAJ,GAAc;IAAE,OAAOF,MAAM,CAACE,OAAd;EAAuB,CAHjB;;EAItBY,OAAO,EAAE,CAACA,OAAD,EAAUE,IAAV,EAAgBD,KAAhB,KAA0B;IACjC,OAAOZ,aAAa,CAACM,GAAd,CAAkB;MAAEK,OAAF;MAAWE,IAAX;MAAiBD;IAAjB,CAAlB,CAAP;EACD,CANqB;EAOtBC,IAAI,EAAE,MAAM;IACV,IAAIhB,MAAM,CAACC,OAAX,EAAoB,OAAOE,aAAa,CAACa,IAAd,EAAP;EACrB,CATqB;EAUtBC,IAAI,EAAE,MAAM;IACV,IAAIjB,MAAM,CAACE,OAAX,EAAoB,OAAOC,aAAa,CAACc,IAAd,EAAP;EACrB;AAZqB,CAAxB;AAgBAE,MAAM,CAACC,OAAP,GAAiBF,eAAjB;AACAC,MAAM,CAACC,OAAP,CAAeC,OAAf,GAAyBH,eAAzB"},"metadata":{},"sourceType":"script"}